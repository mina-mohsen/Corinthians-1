<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ø³Ø§Ù„Ø© ÙƒÙˆØ±Ù†Ø«ÙˆØ³ Ø§Ù„Ø£ÙˆÙ„Ù‰ - Ø§Ù„Ø£ØµØ­Ø§Ø­ Ø§Ù„Ø£ÙˆÙ„</title>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";
        import { getFirestore, collection, doc, addDoc, getDocs, serverTimestamp, query } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'corinthians-quiz-ch1';
        
        let user = null;

        const initAuth = async () => {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (e) { console.error("Auth Error", e); }
        };

        onAuthStateChanged(auth, (u) => { user = u; });
        initAuth();

        const questions = [
            { q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ Ø´Ø§Ø±Ùƒ Ø¨ÙˆÙ„Ø³ Ø§Ù„Ø±Ø³ÙˆÙ„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ­ÙŠØ© Ù„ÙƒÙˆØ±Ù†Ø«ÙˆØ³ØŸ", options: ["ØªÙŠÙ…ÙˆØ«Ø§ÙˆØ³", "Ø³ÙˆØ³Ø«Ø§Ù†ÙŠØ³", "Ù„ÙˆÙ‚Ø§", "Ø³ÙŠÙ„Ø§"], correct: 1, ref: "1:1" },
            { q: "Ø¨Ù…Ø§Ø°Ø§ Ø¯ÙØ¹ÙŠ Ø¨ÙˆÙ„Ø³ ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŸ", options: ["Ø±Ø³ÙˆÙ„Ø§Ù‹ Ù…Ø®ØªØ§Ø±Ø§Ù‹", "Ø±Ø³ÙˆÙ„Ø§Ù‹ Ù…Ø¯Ø¹ÙˆØ§Ù‹", "Ø®Ø§Ø¯Ù…Ø§Ù‹ Ù„Ù„Ù‡", "ØªÙ„Ù…ÙŠØ°Ø§Ù‹ Ù„Ù„Ù…Ø³ÙŠØ­"], correct: 1, ref: "1:1" },
            { q: "Ø¨Ø£ÙŠ ØµÙØ© ÙˆÙØµÙ Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ† ÙÙŠ ÙƒÙˆØ±Ù†Ø«ÙˆØ³ØŸ", options: ["Ø§Ù„Ù…Ù‚Ø¯Ø³ÙŠÙ† ÙÙŠ Ø§Ù„Ù…Ø³ÙŠØ­ ÙŠØ³ÙˆØ¹", "Ø§Ù„Ø£Ø¨Ø±Ø§Ø± Ø¨Ø§Ù„Ù†Ø¹Ù…Ø©", "Ø­ÙØ¸Ø© Ø§Ù„Ù†Ø§Ù…ÙˆØ³", "Ø±Ø¹ÙŠØ© Ø§Ù„Ù„Ù‡"], correct: 0, ref: "1:2" },
            { q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¨Ø±ÙƒØ© Ø§Ù„ØªÙŠ ÙŠØ·Ù„Ø¨Ù‡Ø§ Ø¨ÙˆÙ„Ø³ ÙÙŠ Ø§Ù„ØªØ­ÙŠØ©ØŸ", options: ["Ø¥ÙŠÙ…Ø§Ù† ÙˆØ±Ø¬Ø§Ø¡", "Ù†Ø¹Ù…Ø© ÙˆØ³Ù„Ø§Ù…", "Ù‚ÙˆØ© ÙˆØ«Ø¨Ø§Øª", "Ù…Ø­Ø¨Ø© ÙˆÙØ±Ø­"], correct: 1, ref: "1:3" },
            { q: "Ù„Ù…Ø§Ø°Ø§ ÙŠØ´ÙƒØ± Ø¨ÙˆÙ„Ø³ Ø¥Ù„Ù‡Ù‡ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù…Ù† Ø¬Ù‡ØªÙ‡Ù…ØŸ", options: ["Ù„Ø£Ø¬Ù„ ØµØ¨Ø±Ù‡Ù…", "Ù„Ø£Ø¬Ù„ Ù†Ø¹Ù…Ø© Ø§Ù„Ù„Ù‡ Ø§Ù„Ù…Ø¹Ø·Ø§Ø© Ù„Ù‡Ù…", "Ù„Ø£Ø¬Ù„ ÙƒØ«Ø±Ø© Ø¹Ø¯Ø¯Ù‡Ù…", "Ù„Ø£Ø¬Ù„ ØµÙˆÙ…Ù‡Ù…"], correct: 1, ref: "1:4" },
            { q: "ÙÙŠ Ø£ÙŠ Ø´ÙŠØ¡ Ø§Ø³ØªØºÙ†Ù‰ Ø£Ù‡Ù„ ÙƒÙˆØ±Ù†Ø«ÙˆØ³ ÙÙŠ Ø§Ù„Ù…Ø³ÙŠØ­ØŸ", options: ["ÙÙŠ ÙƒÙ„ ÙƒÙ„Ù…Ø© ÙˆÙƒÙ„ Ø¹Ù„Ù…", "ÙÙŠ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø§Ù„Ù…Ø§Ø¯ÙŠØ©", "ÙÙŠ Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©", "ÙÙŠ Ø§Ù„ÙÙ„Ø³ÙØ© Ø§Ù„ÙŠÙˆÙ†Ø§Ù†ÙŠØ©"], correct: 0, ref: "1:5" },
            { q: "Ù…Ø§Ø°Ø§ ØªØ£ÙŠØ¯ Ø¨ÙŠÙ†Ù‡Ù… Ø­Ø³Ø¨ Ù‚ÙˆÙ„ Ø¨ÙˆÙ„Ø³ Ø§Ù„Ø±Ø³ÙˆÙ„ØŸ", options: ["Ù†Ø§Ù…ÙˆØ³ Ù…ÙˆØ³Ù‰", "Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù…Ø³ÙŠØ­", "ØªØ¹Ø§Ù„ÙŠÙ… Ø§Ù„ÙÙ„Ø§Ø³ÙØ©", "Ø£Ù‚ÙˆØ§Ù„ Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡"], correct: 1, ref: "1:6" },
            { q: "Ø¨ÙˆÙ„Ø³ ÙŠÙ‚ÙˆÙ„ Ø£Ù†Ù‡Ù… ØºÙŠØ± Ù†Ø§Ù‚ØµÙŠÙ† ÙÙŠ Ø£ÙŠ...ØŸ", options: ["Ù…ÙˆÙ‡Ø¨Ø©", "ÙƒÙ„Ù…Ø©", "Ø¹Ù…Ù„", "ÙÙƒØ±"], correct: 0, ref: "1:7" },
            { q: "Ù…Ø§Ø°Ø§ ÙŠÙ†ØªØ¸Ø± Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ† ÙÙŠ ÙƒÙˆØ±Ù†Ø«ÙˆØ³ØŸ", options: ["Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¹Ø§Ù„Ù…", "Ø§Ø³ØªØ¹Ù„Ø§Ù† Ø±Ø¨Ù†Ø§ ÙŠØ³ÙˆØ¹ Ø§Ù„Ù…Ø³ÙŠØ­", "Ø²ÙŠØ§Ø±Ø© Ø¨ÙˆÙ„Ø³", "Ø§Ù„Ù…ÙˆØª"], correct: 1, ref: "1:7" },
            { q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø°ÙŠ Ø³ÙŠØ«Ø¨ØªÙ‡Ù… Ø¥Ù„Ù‰ Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ø¨Ù„Ø§ Ù„ÙˆÙ…ØŸ", options: ["Ø¨ÙˆÙ„Ø³ Ø§Ù„Ø±Ø³ÙˆÙ„", "ÙŠØ³ÙˆØ¹ Ø§Ù„Ù…Ø³ÙŠØ­", "Ø³ÙˆØ³Ø«Ø§Ù†ÙŠØ³", "Ø§Ù„Ø£Ø³Ù‚Ù"], correct: 1, ref: "1:8" },
            { q: "Ø§Ù„Ù„Ù‡ Ø£Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠ Ø¨Ù‡ Ø¯ÙØ¹ÙŠØªÙ… Ø¥Ù„Ù‰... Ø§Ø¨Ù†Ù‡ØŸ", options: ["Ø®Ø¯Ù…Ø©", "Ø´Ø±ÙƒØ©", "ØªÙ…Ø¬ÙŠØ¯", "Ø±Ø¤ÙŠØ©"], correct: 1, ref: "1:9" },
            { q: "Ø¨Ø£ÙŠ Ø§Ø³Ù… ÙŠÙ†Ø§Ø´Ø¯Ù‡Ù… Ø¨ÙˆÙ„Ø³ Ø£Ù† ÙŠØªÙƒÙ„Ù…ÙˆØ§ Ø¬Ù…ÙŠØ¹Ø§Ù‹ Ù‚ÙˆÙ„Ø§ ÙˆØ§Ø­Ø¯Ø§Ù‹ØŸ", options: ["Ø§Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¢Ø¨", "Ø§Ø³Ù… Ø±Ø¨Ù†Ø§ ÙŠØ³ÙˆØ¹ Ø§Ù„Ù…Ø³ÙŠØ­", "Ø§Ø³Ù… Ø§Ù„Ø±ÙˆØ­ Ø§Ù„Ù‚Ø¯Ø³", "Ø§Ø³Ù…Ù‡ Ù‡Ùˆ Ø§Ù„Ø´Ø®ØµÙŠ"], correct: 1, ref: "1:10" },
            { q: "Ù…Ø§Ø°Ø§ Ø·Ù„Ø¨ Ø¨ÙˆÙ„Ø³ Ø£Ù„Ø§ ÙŠÙƒÙˆÙ† Ø¨ÙŠÙ†Ù‡Ù…ØŸ", options: ["Ø®Ø·Ø§ÙŠØ§", "Ø§Ù†Ø´Ù‚Ø§Ù‚Ø§Øª", "Ù†Ù‚Ø§Ø´Ø§Øª", "ØµÙ„ÙˆØ§Øª"], correct: 1, ref: "1:10" },
            { q: "Ù…Ù† Ù‡Ù… Ø§Ù„Ø°ÙŠÙ† Ø£Ø®Ø¨Ø±ÙˆØ§ Ø¨ÙˆÙ„Ø³ Ø¹Ù† ÙˆØ¬ÙˆØ¯ Ø®ØµÙˆÙ…Ø§Øª ÙÙŠ ÙƒÙˆØ±Ù†Ø«ÙˆØ³ØŸ", options: ["Ø£Ù‡Ù„ Ø£ÙØ³Ø³", "Ø£Ù‡Ù„ Ø®Ù„ÙˆÙŠ", "Ø£Ù‡Ù„ Ø±ÙˆÙ…Ø§", "Ø£Ù‡Ù„ ØºÙ„Ø§Ø·ÙŠØ©"], correct: 1, ref: "1:11" },
            { q: "Ù…Ø§Ø°Ø§ ÙƒØ§Ù† ÙŠÙ‚ÙˆÙ„ Ø§Ù„Ø¨Ø¹Ø¶ ÙÙŠ ÙƒÙˆØ±Ù†Ø«ÙˆØ³ Ø¹Ù† ØªØ¨Ø¹ÙŠØªÙ‡Ù…ØŸ", options: ["Ø£Ù†Ø§ Ù„Ø¨ÙˆÙ„Ø³", "Ø£Ù†Ø§ Ù„Ø£Ø¨Ù„ÙˆØ³", "Ø£Ù†Ø§ Ù„ØµÙØ§", "ÙƒÙ„ Ù…Ø§ Ø³Ø¨Ù‚"], correct: 3, ref: "1:12" },
            { q: "Ù…Ù† Ø§Ù„Ù…Ù‚ØµÙˆØ¯ Ø¨Ù€ 'ØµÙØ§' ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŸ", options: ["Ø¨ÙˆÙ„Ø³", "Ø¨Ø·Ø±Ø³", "Ù„ÙˆÙ‚Ø§", "Ø¨Ø±Ù†Ø§Ø¨Ø§"], correct: 1, ref: "1:12" },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø§Ø³ØªÙ†ÙƒØ§Ø±ÙŠ Ø§Ù„Ø°ÙŠ Ø³Ø£Ù„Ù‡ Ø¨ÙˆÙ„Ø³ØŸ", options: ["Ù‡Ù„ Ø§Ù„Ù…Ø³ÙŠØ­ ØºØ§Ø¦Ø¨ØŸ", "Ù‡Ù„ Ø§Ù†Ù‚Ø³Ù… Ø§Ù„Ù…Ø³ÙŠØ­ØŸ", "Ù‡Ù„ ØªØ£Ù„Ù… Ø§Ù„Ù…Ø³ÙŠØ­ØŸ", "Ù‡Ù„ Ù‚Ø§Ù… Ø§Ù„Ù…Ø³ÙŠØ­ØŸ"], correct: 1, ref: "1:13" },
            { q: "Ù‡Ù„ ØµÙÙ„Ø¨ Ø¨ÙˆÙ„Ø³ Ù„Ø£Ø¬Ù„ Ø£Ù‡Ù„ ÙƒÙˆØ±Ù†Ø«ÙˆØ³ØŸ", options: ["Ù†Ø¹Ù…", "ÙƒÙ„Ø§", "Ø±Ø¨Ù…Ø§", "Ù„Ù… ÙŠØ°ÙƒØ±"], correct: 1, ref: "1:13" },
            { q: "Ø¨Ø§Ø³Ù… Ù…Ù† Ø§Ø¹ØªÙ…Ø¯ Ø£Ù‡Ù„ ÙƒÙˆØ±Ù†Ø«ÙˆØ³ØŸ", options: ["Ø§Ø³Ù… Ø¨ÙˆÙ„Ø³", "Ø§Ø³Ù… Ø£Ø¨Ù„ÙˆØ³", "Ø§Ø³Ù… Ø§Ù„Ø±Ø¨ ÙŠØ³ÙˆØ¹", "Ø§Ø³Ù… Ø³ÙˆØ³Ø«Ø§Ù†ÙŠØ³"], correct: 2, ref: "1:13" },
            { q: "Ù…Ù† Ù‡Ù… Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø§Ù„Ø°ÙŠÙ† Ø°ÙƒØ± Ø¨ÙˆÙ„Ø³ Ø£Ù†Ù‡ Ø¹Ù…Ø¯Ù‡Ù… Ø¨Ù†ÙØ³Ù‡ØŸ", options: ["ÙƒØ±ÙŠØ³Ø¨Ø³ ÙˆØºØ§ÙŠØ³", "Ø³ÙˆØ³Ø«Ø§Ù†ÙŠØ³ ÙˆÙ„ÙˆÙ‚Ø§", "Ø¨Ø·Ø±Ø³ ÙˆØ£Ù†Ø¯Ø±Ø§ÙˆØ³", "Ù…Ø±ÙŠÙ… ÙˆÙ…Ø±Ø«Ø§"], correct: 0, ref: "1:14" },
            { q: "Ø£ÙŠ Ø¨ÙŠØª Ù‚Ø§Ù… Ø¨ÙˆÙ„Ø³ Ø¨ØªØ¹Ù…ÙŠØ¯Ù‡ Ø£ÙŠØ¶Ø§Ù‹ØŸ", options: ["Ø¨ÙŠØª Ù„ÙŠØ¯ÙŠØ§", "Ø¨ÙŠØª Ø§Ø³ØªÙØ§Ù†Ø§Ø³", "Ø¨ÙŠØª ÙƒÙŠØ±Ù†ÙŠÙ„ÙŠÙˆØ³", "Ø¨ÙŠØª ÙÙŠÙ„Ø¨Ø³"], correct: 1, ref: "1:16" },
            { q: "Ù„Ù…Ø§Ø°Ø§ Ø£Ø±Ø³Ù„ Ø§Ù„Ù…Ø³ÙŠØ­ Ø¨ÙˆÙ„Ø³ Ø­Ø³Ø¨ Ù‚ÙˆÙ„Ù‡ØŸ", options: ["Ù„ÙŠØ¹Ù…Ø¯ ÙÙ‚Ø·", "Ù„ÙŠØ¨Ø´Ø±", "Ù„ÙŠØ­Ø§ÙƒÙ…", "Ù„ÙŠØ¬Ù…Ø¹ Ø£Ù…ÙˆØ§Ù„Ø§Ù‹"], correct: 1, ref: "1:17" },
            { q: "Ø¨Ø´Ø± Ø¨ÙˆÙ„Ø³ Ø§Ù„Ø¥Ù†Ø¬ÙŠÙ„ Ø¨ØºÙŠØ±... Ù„Ø¦Ù„Ø§ ÙŠØªØ¹Ø·Ù„ ØµÙ„ÙŠØ¨ Ø§Ù„Ù…Ø³ÙŠØ­ØŸ", options: ["Ø­ÙƒÙ…Ø© ÙƒÙ„Ø§Ù…", "Ù…Ø§Ù„ ÙƒØ«ÙŠØ±", "Ø®ÙˆÙ", "ØªØ±Ø¯Ø¯"], correct: 0, ref: "1:17" },
            { q: "ÙƒÙ„Ù…Ø© Ø§Ù„ØµÙ„ÙŠØ¨ Ø¹Ù†Ø¯ Ø§Ù„Ù‡Ø§Ù„ÙƒÙŠÙ† Ù‡ÙŠ...ØŸ", options: ["Ù‚ÙˆØ©", "Ø¬Ù‡Ø§Ù„Ø©", "ÙÙ„Ø³ÙØ©", "Ø­Ø²Ù†"], correct: 1, ref: "1:18" },
            { q: "ÙƒÙ„Ù…Ø© Ø§Ù„ØµÙ„ÙŠØ¨ Ø¹Ù†Ø¯Ù†Ø§ Ù†Ø­Ù† Ø§Ù„Ù…Ø®Ù„ØµÙŠÙ† Ù‡ÙŠ...ØŸ", options: ["Ø­ÙƒÙ…Ø© Ø¨Ø´Ø±ÙŠØ©", "Ù‚ÙˆØ© Ø§Ù„Ù„Ù‡", "Ø¶Ø¹Ù Ø¥Ù†Ø³Ø§Ù†ÙŠ", "Ø®Ø±Ø§ÙØ©"], correct: 1, ref: "1:18" },
            { q: "Ù…Ø§Ø°Ø§ Ø³ÙŠÙØ¹Ù„ Ø§Ù„Ù„Ù‡ Ø¨Ø­ÙƒÙ…Ø© Ø§Ù„Ø­ÙƒÙ…Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ù„Ù…ÙƒØªÙˆØ¨ØŸ", options: ["ÙŠØ¨ÙŠØ¯Ù‡Ø§", "ÙŠÙ…Ø¬Ø¯Ù‡Ø§", "ÙŠØ¬Ù…Ø¹Ù‡Ø§", "ÙŠÙ†Ø´Ø±Ù‡Ø§"], correct: 0, ref: "1:19" },
            { q: "Ø£ÙŠÙ† Ø§Ù„Ø­ÙƒÙŠÙ…ØŸ Ø£ÙŠÙ† Ø§Ù„ÙƒØ§ØªØ¨ØŸ Ø£ÙŠÙ†... Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù‡Ø±ØŸ", options: ["Ù…Ø¨Ø§Ø­Ø«", "ÙÙŠÙ„Ø³ÙˆÙ", "Ù…Ù„Ùƒ", "ØºÙ†ÙŠ"], correct: 0, ref: "1:20" },
            { q: "Ø£Ù„Ù… ÙŠØ¬Ù‡Ù„ Ø§Ù„Ù„Ù‡... Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["Ù‚ÙˆØ©", "Ø­ÙƒÙ…Ø©", "Ø¬Ù…Ø§Ù„", "ÙÙ†ÙˆÙ†"], correct: 1, ref: "1:20" },
            { q: "Ø¨ÙˆØ§Ø³Ø·Ø© Ù…Ø§Ø°Ø§ Ø³ÙØ±Ù‘ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠØ®Ù„Øµ Ø§Ù„Ù…Ø¤Ù…Ù†ÙŠÙ†ØŸ", options: ["Ø¬Ù‡Ø§Ù„Ø© Ø§Ù„ÙƒØ±Ø§Ø²Ø©", "Ø­ÙƒÙ…Ø© Ø§Ù„Ù…Ù†Ø·Ù‚", "Ø§Ù„Ù…Ø¹Ø¬Ø²Ø§Øª Ø§Ù„ÙƒØ¨Ø±Ù‰", "Ø§Ù„Ù…Ø§Ù„ ÙˆØ§Ù„Ø¬Ø§Ù‡"], correct: 0, ref: "1:21" },
            { q: "Ù…Ø§Ø°Ø§ ÙŠØ·Ù„Ø¨ Ø§Ù„ÙŠÙ‡ÙˆØ¯ØŸ", options: ["Ø­ÙƒÙ…Ø©", "Ø¢ÙŠØ©", "Ù…Ø§Ù„Ø§Ù‹", "Ø³Ù„Ø·Ø©"], correct: 1, ref: "1:22" },
            { q: "Ù…Ø§Ø°Ø§ ÙŠØ·Ù„Ø¨ Ø§Ù„ÙŠÙˆÙ†Ø§Ù†ÙŠÙˆÙ†ØŸ", options: ["Ø¢ÙŠØ§Øª", "Ø­ÙƒÙ…Ø©", "Ø£Ø³Ø§Ø·ÙŠØ±", "Ø£ÙˆØ«Ø§Ù†"], correct: 1, ref: "1:22" },
            { q: "Ù†Ø­Ù† Ù†ÙƒØ±Ø² Ø¨Ù€...ØŸ", options: ["Ø§Ù„Ù…Ø³ÙŠØ­ Ù…ØµÙ„ÙˆØ¨Ø§Ù‹", "Ø§Ù„Ù…Ø³ÙŠØ­ Ù…Ù„ÙƒØ§Ù‹ Ø£Ø±Ø¶ÙŠØ§Ù‹", "Ø§Ù„Ù…Ø³ÙŠØ­ ÙÙŠÙ„Ø³ÙˆÙØ§Ù‹", "Ø§Ù„Ù…Ø³ÙŠØ­ ØºÙ†ÙŠØ§Ù‹"], correct: 0, ref: "1:23" },
            { q: "Ø§Ù„Ù…Ø³ÙŠØ­ Ø§Ù„Ù…ØµÙ„ÙˆØ¨ Ù„Ù„ÙŠÙ‡ÙˆØ¯ Ù‡Ùˆ...ØŸ", options: ["Ù‚ÙˆØ©", "Ø¹Ø«Ø±Ø©", "Ø­ÙƒÙ…Ø©", "ÙØ±Ø­"], correct: 1, ref: "1:23" },
            { q: "Ø§Ù„Ù…Ø³ÙŠØ­ Ø§Ù„Ù…ØµÙ„ÙˆØ¨ Ù„Ù„ÙŠÙˆÙ†Ø§Ù†ÙŠÙŠÙ† Ù‡Ùˆ...ØŸ", options: ["Ø¬Ù‡Ø§Ù„Ø©", "Ù…Ù†Ø·Ù‚", "Ø­Ù‚ÙŠÙ‚Ø©", "Ø³Ø±"], correct: 0, ref: "1:23" },
            { q: "Ø§Ù„Ù…Ø³ÙŠØ­ Ù‡Ùˆ Ù‚ÙˆØ© Ø§Ù„Ù„Ù‡ Ùˆ... Ø§Ù„Ù„Ù‡ Ù„Ù„Ù…Ø¯Ø¹ÙˆÙŠÙ†ØŸ", options: ["Ù…Ø¬Ø¯", "Ø­ÙƒÙ…Ø©", "Ø±Ø­Ù…Ø©", "Ø®ÙˆÙ"], correct: 1, ref: "1:24" },
            { q: "Ø¬Ù‡Ø§Ù„Ø© Ø§Ù„Ù„Ù‡ Ø£Ø­ÙƒÙ… Ù…Ù†...ØŸ", options: ["Ø§Ù„Ù†Ø§Ø³", "Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ©", "Ø§Ù„Ø´ÙŠØ§Ø·ÙŠÙ†", "Ø§Ù„ÙÙ„Ø§Ø³ÙØ©"], correct: 0, ref: "1:25" },
            { q: "Ø¶Ø¹Ù Ø§Ù„Ù„Ù‡ Ø£Ù‚ÙˆÙ‰ Ù…Ù†...ØŸ", options: ["Ø§Ù„Ù†Ø§Ø³", "Ø§Ù„Ø­Ø¯ÙŠØ¯", "Ø§Ù„Ù…ÙˆØª", "Ø§Ù„Ù…Ø±Ø¶"], correct: 0, ref: "1:25" },
            { q: "Ø§Ù†Ø¸Ø±ÙˆØ§ Ø¯Ø¹ÙˆØªÙƒÙ…ØŒ Ù„ÙŠØ³ ÙƒØ«ÙŠØ±ÙˆÙ†... Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø³Ø¯ØŸ", options: ["Ø£Ù‚ÙˆÙŠØ§Ø¡", "Ø­ÙƒÙ…Ø§Ø¡", "Ø£ØºÙ†ÙŠØ§Ø¡", "Ù…Ù„ÙˆÙƒ"], correct: 1, ref: "1:26" },
            { q: "Ù„ÙŠØ³ ÙƒØ«ÙŠØ±ÙˆÙ†... Ù„ÙŠØ³ ÙƒØ«ÙŠØ±ÙˆÙ† Ø´Ø±ÙØ§Ø¡ØŸ", options: ["Ø¹Ù„Ù…Ø§Ø¡", "Ù…Ù‚ØªØ¯Ø±ÙŠÙ†", "ÙÙ‚Ø±Ø§Ø¡", "Ù…Ø³Ø§ÙƒÙŠÙ†"], correct: 1, ref: "1:26" },
            { q: "Ø§Ø®ØªØ§Ø± Ø§Ù„Ù„Ù‡ Ø¬Ù‡Ø§Ù„ Ø§Ù„Ø¹Ø§Ù„Ù… Ù„ÙŠØ®Ø²ÙŠ...ØŸ", options: ["Ø§Ù„Ø£Ø´Ø±Ø§Ø±", "Ø§Ù„Ø­ÙƒÙ…Ø§Ø¡", "Ø§Ù„Ø¶Ø¹ÙØ§Ø¡", "Ø§Ù„Ø£ØºÙ†ÙŠØ§Ø¡"], correct: 1, ref: "1:27" },
            { q: "Ø§Ø®ØªØ§Ø± Ø§Ù„Ù„Ù‡ Ø¶Ø¹ÙØ§Ø¡ Ø§Ù„Ø¹Ø§Ù„Ù… Ù„ÙŠØ®Ø²ÙŠ...ØŸ", options: ["Ø§Ù„Ø£Ù‚ÙˆÙŠØ§Ø¡", "Ø§Ù„Ù…Ø±Ø¶Ù‰", "Ø§Ù„ÙÙ„Ø§Ø³ÙØ©", "Ø§Ù„Ù…ØªÙƒØ¨Ø±ÙŠÙ†"], correct: 0, ref: "1:27" },
            { q: "Ø§Ø®ØªØ§Ø± Ø§Ù„Ù„Ù‡ Ø£Ø¯Ù†ÙŠØ§Ø¡ Ø§Ù„Ø¹Ø§Ù„Ù… Ùˆ...ØŸ", options: ["Ø§Ù„Ù…Ø²Ø¯Ø±Ù‰ ÙˆØºÙŠØ± Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯", "Ø§Ù„Ù…Ø¹Ø±ÙˆÙ ÙˆØ§Ù„Ù…Ø´Ù‡ÙˆØ±", "Ø§Ù„Ø£ØºÙ†ÙŠØ§Ø¡ ÙˆØ§Ù„Ù…Ù„ÙˆÙƒ", "Ø§Ù„Ø­ÙƒÙ…Ø§Ø¡ ÙˆØ§Ù„Ø¹Ù„Ù…Ø§Ø¡"], correct: 0, ref: "1:28" },
            { q: "Ù„Ù…Ø§Ø°Ø§ Ø§Ø®ØªØ§Ø± Ø§Ù„Ù„Ù‡ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ù…ÙˆØ± Ø§Ù„Ø¶Ø¹ÙŠÙØ©ØŸ", options: ["Ù„ÙƒÙŠ ÙŠØ¨Ø·Ù„ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯", "Ù„ÙƒÙŠ ÙŠØ¬Ù…Ø¹ Ø§Ù„Ù…Ø§Ù„", "Ù„ÙƒÙŠ ÙŠØ­Ø§Ø±Ø¨ Ø§Ù„Ø±ÙˆÙ…Ø§Ù†", "Ù„ÙƒÙŠ ÙŠÙ…Ø¯Ø­ Ø§Ù„ÙÙ‚Ø±"], correct: 0, ref: "1:28" },
            { q: "Ù„ÙƒÙŠ Ù„Ø§ ÙŠÙØªØ®Ø± ÙƒÙ„ Ø°ÙŠ Ø¬Ø³Ø¯...ØŸ", options: ["Ø£Ù…Ø§Ù… Ø§Ù„Ù†Ø§Ø³", "Ø£Ù…Ø§Ù… Ø§Ù„Ù„Ù‡", "Ø£Ù…Ø§Ù… Ù†ÙØ³Ù‡", "Ø£Ù…Ø§Ù… Ø§Ù„Ø´ÙŠØ§Ø·ÙŠÙ†"], correct: 1, ref: "1:29" },
            { q: "Ù…Ù†Ù‡ Ø£Ù†ØªÙ… Ø¨Ø§Ù„Ù…Ø³ÙŠØ­ ÙŠØ³ÙˆØ¹ Ø§Ù„Ø°ÙŠ ØµØ§Ø± Ù„Ù†Ø§... Ù…Ù† Ø§Ù„Ù„Ù‡ØŸ", options: ["Ø­ÙƒÙ…Ø© ÙˆØ¨Ø±Ø§Ù‹", "Ù‚ÙˆØ© ÙˆØºÙ†Ù‰", "ØµØ­Ø© ÙˆØ¹Ø§ÙÙŠØ©", "Ø¹Ù„Ù…Ø§Ù‹ ÙˆÙ…Ù†Ø·Ù‚Ø§Ù‹"], correct: 0, ref: "1:30" },
            { q: "Ù…Ø§Ø°Ø§ ØµØ§Ø± Ù„Ù†Ø§ Ø§Ù„Ù…Ø³ÙŠØ­ Ø£ÙŠØ¶Ø§Ù‹ØŸ", options: ["Ù‚Ø¯Ø§Ø³Ø© ÙˆÙØ¯Ø§Ø¡", "Ù…Ø§Ù„Ø§Ù‹ ÙˆØ¬Ø§Ù‡Ø§Ù‹", "Ø®ÙˆÙØ§Ù‹ ÙˆØ±Ù‡Ø¨Ø©", "Ø­Ø²Ù†Ø§Ù‹ ÙˆØ£Ù„Ù…Ø§Ù‹"], correct: 0, ref: "1:30" },
            { q: "Ù…Ù† Ø§ÙØªØ®Ø± ÙÙ„ÙŠÙØªØ®Ø± Ø¨Ù€...ØŸ", options: ["Ø¨Ø¹Ù„Ù…Ù‡", "Ø¨Ø§Ù„Ø±Ø¨", "Ø¨Ø£Ø¹Ù…Ø§Ù„Ù‡", "Ø¨Ù†Ø³Ø¨Ù‡"], correct: 1, ref: "1:31" },
            { q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø¢ÙŠØ§Øª Ø§Ù„Ø£ØµØ­Ø§Ø­ Ø§Ù„Ø£ÙˆÙ„ØŸ", options: ["20 Ø¢ÙŠØ©", "31 Ø¢ÙŠØ©", "25 Ø¢ÙŠØ©", "40 Ø¢ÙŠØ©"], correct: 1, ref: "Ø§Ù„Ø£ØµØ­Ø§Ø­ 1" },
            { q: "Ù…Ù† Ù‡Ùˆ ÙƒØ§ØªØ¨ Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŸ", options: ["Ø¨Ø·Ø±Ø³ Ø§Ù„Ø±Ø³ÙˆÙ„", "Ø¨ÙˆÙ„Ø³ Ø§Ù„Ø±Ø³ÙˆÙ„", "ÙŠÙˆØ­Ù†Ø§ Ø§Ù„Ø±Ø³ÙˆÙ„", "ÙŠØ¹Ù‚ÙˆØ¨ Ø§Ù„Ø±Ø³ÙˆÙ„"], correct: 1, ref: "1:1" },
            { q: "Ù„Ù…Ù† ÙˆÙØ¬Ù‡Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŸ", options: ["ÙƒÙ†ÙŠØ³Ø© Ø±ÙˆÙ…Ø§", "ÙƒÙ†ÙŠØ³Ø© ÙƒÙˆØ±Ù†Ø«ÙˆØ³", "ÙƒÙ†ÙŠØ³Ø© Ø£ÙØ³Ø³", "ÙƒÙ†ÙŠØ³Ø© ØºÙ„Ø§Ø·ÙŠØ©"], correct: 1, ref: "1:2" },
            { q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© ÙÙŠ Ø§Ù„Ø£ØµØ­Ø§Ø­ØŸ", options: ["Ø­ÙƒÙ…Ø© Ø§Ù„Ù†Ø§Ø³", "Ù‚ÙˆØ© Ø§Ù„Ù„Ù‡", "Ø¨Ø§Ù„Ù…Ø³ÙŠØ­ ÙŠØ³ÙˆØ¹", "Ø¨ÙØ¹Ù„ Ø§Ù„Ù†Ø§Ù…ÙˆØ³"], correct: 2, ref: "1:1-31" },
            { q: "Ø¨Ø£ÙŠ Ø´ÙŠØ¡ Ø£Ø±Ø§Ø¯ Ø¨ÙˆÙ„Ø³ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø§Ù†Ù‚Ø³Ø§Ù…Ø§ØªØŸ", options: ["Ø¨Ø§Ù„Ù‚ÙˆØ©", "Ø¨Ø§Ø³Ù… Ø±Ø¨Ù†Ø§ ÙŠØ³ÙˆØ¹ Ø§Ù„Ù…Ø³ÙŠØ­", "Ø¨Ø§Ù„Ù…Ø§Ù„", "Ø¨Ø§Ù„ØªÙ‡Ø¯ÙŠØ¯"], correct: 1, ref: "1:10" },
            { q: "Ù‡Ù„ Ø§Ø¹ØªÙ…Ø¯ Ø¨ÙˆÙ„Ø³ Ø¹Ø¯Ø¯Ø§Ù‹ ÙƒØ¨ÙŠØ±Ø§Ù‹ ÙÙŠ ÙƒÙˆØ±Ù†Ø«ÙˆØ³ØŸ", options: ["Ù†Ø¹Ù… Ø§Ù„Ø¬Ù…ÙŠØ¹", "Ù„Ø§ Ø£Ø­Ø¯", "Ø¹Ø¯Ø¯ Ù‚Ù„ÙŠÙ„ Ø°ÙƒØ±Ù‡ Ø¨Ø§Ù„Ø§Ø³Ù…", "Ù„Ù… ÙŠØ°ÙƒØ±"], correct: 2, ref: "1:14-16" },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø£ØµØ­Ø§Ø­ØŸ", options: ["Ø§Ù„Ø®ØªØ§Ù†", "ØµÙ„ÙŠØ¨ Ø§Ù„Ù…Ø³ÙŠØ­ ÙˆØ­ÙƒÙ…ØªÙ‡", "Ø¬Ù…Ø¹ Ø§Ù„ØµØ¯Ù‚Ø§Øª", "Ø±Ø­Ù„Ø§Øª Ø¨ÙˆÙ„Ø³"], correct: 1, ref: "1:18" },
            { q: "Ø£ÙŠÙ† ÙƒÙØªØ¨ 'Ø³Ø£Ø¨ÙŠØ¯ Ø­ÙƒÙ…Ø© Ø§Ù„Ø­ÙƒÙ…Ø§Ø¡'ØŸ", options: ["ÙÙŠ Ø§Ù„Ø¥Ù†Ø¬ÙŠÙ„", "ÙÙŠ Ø§Ù„Ø¹Ù‡Ø¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…", "ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ø±ÙˆÙ…Ø§", "ÙÙŠ Ø±Ø¤ÙŠØ§ ÙŠÙˆØ­Ù†Ø§"], correct: 1, ref: "1:19" },
            { q: "Ù„Ù…Ø§Ø°Ø§ Ù„Ù… ØªØ¯Ø±Ùƒ Ø§Ù„Ø­ÙƒÙ…Ø© Ø§Ù„Ø¨Ø´Ø±ÙŠØ© Ø§Ù„Ù„Ù‡ØŸ", options: ["Ù„Ø£Ù† Ø§Ù„Ù„Ù‡ Ø£Ø®ÙÙ‰ Ù†ÙØ³Ù‡", "Ù„Ø£Ù† Ø§Ù„Ø¹Ø§Ù„Ù… Ù„Ù… ÙŠØ¹Ø±Ù Ø§Ù„Ù„Ù‡ Ø¨Ø­ÙƒÙ…ØªÙ‡", "Ù„Ø£Ù† Ø§Ù„ÙÙ„Ø³ÙØ© ØµØ¹Ø¨Ø©", "Ù„Ø£Ù† Ø§Ù„ÙƒØªØ¨ Ø¶Ø§Ø¹Øª"], correct: 1, ref: "1:21" },
            { q: "Ù…Ø§Ø°Ø§ ÙŠÙ…Ø«Ù„ ØµÙ„ÙŠØ¨ Ø§Ù„Ù…Ø³ÙŠØ­ Ù„Ù„Ù…Ø¤Ù…Ù†ÙŠÙ†ØŸ", options: ["ÙØ´Ù„Ø§Ù‹", "Ù‚ÙˆØ© Ø§Ù„Ù„Ù‡ ÙˆØ­ÙƒÙ…ØªÙ‡", "Ù…Ø¬Ø±Ø¯ Ø°ÙƒØ±Ù‰", "Ø­ÙƒÙ…Ø§Ù‹ Ø¨Ø§Ù„Ù…ÙˆØª"], correct: 1, ref: "1:24" },
            { q: "Ù…Ø§Ø°Ø§ Ù‚ØµØ¯ Ø¨ÙˆÙ„Ø³ Ø¨Ù€ 'Ø§Ù„Ù…Ø²Ø¯Ø±ÙŠ ÙˆØºÙŠØ± Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯'ØŸ", options: ["Ø§Ù„Ø£ÙˆØ«Ø§Ù†", "Ø§Ù„Ø£Ù…Ù…", "Ø§Ù„Ø£Ø¨Ø§Ø·Ø±Ø©", "Ø§Ù„ÙÙ„Ø§Ø³ÙØ©"], correct: 1, ref: "1:28" },
            { q: "ÙƒÙŠÙ Ù†Ø§Ù„ Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ† Ø§Ù„Ø¨Ø± ÙˆØ§Ù„Ù‚Ø¯Ø§Ø³Ø©ØŸ", options: ["Ø¨Ø£Ø¹Ù…Ø§Ù„Ù‡Ù…", "Ø¨Ø§Ù„Ù…Ø³ÙŠØ­ ÙŠØ³ÙˆØ¹", "Ø¨Ø­ÙØ¸ Ø§Ù„Ø³Ø¨Øª", "Ø¨Ø¯Ø±Ø§Ø³Ø© Ø§Ù„ÙÙ„Ø³ÙØ©"], correct: 1, ref: "1:30" },
            { q: "Ù…Ø§ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„Ù‡ Ù„Ù„Ø¶Ø¹ÙØ§Ø¡ØŸ", options: ["Ø¥Ù‡Ø§Ù†Ø© Ø§Ù„Ù†Ø§Ø³", "Ø£Ù† Ù„Ø§ ÙŠÙØªØ®Ø± Ø¨Ø´Ø± Ø£Ù…Ø§Ù…Ù‡", "ØªØºÙŠÙŠØ± Ø§Ù„Ø­ÙƒÙ…", "Ù†Ø´Ø± Ø§Ù„ÙÙ‚Ø±"], correct: 1, ref: "1:29" }
        ];

        let current = 0, answers = new Array(questions.length).fill(null), timeLeft = 20 * 60, timer;
        const lockKey = "lock_cor1_quiz_final";

        window.startQuiz = () => {
            const fields = ['u-name', 'u-phone', 'u-address', 'u-birthdate'];
            for(let f of fields) if(!document.getElementById(f).value.trim()) return alert("Ø¨Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.");
            if(localStorage.getItem(lockKey)) return alert("Ù„Ù‚Ø¯ Ø´Ø§Ø±ÙƒØª ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹.");
            
            switchScreen('quiz-screen');
            document.getElementById('timer-box').style.display = 'block';
            initQuiz();
            startTimer();
        };

        function initQuiz() {
            const wrapper = document.getElementById('q-wrapper');
            const grid = document.getElementById('nav-grid');
            wrapper.innerHTML = ""; grid.innerHTML = "";
            questions.forEach((q, i) => {
                const div = document.createElement('div');
                div.className = `screen ${i===0?'active-screen':''}`;
                div.id = `q-cnt-${i}`;
                div.innerHTML = `<div class="q-text">${i+1}. ${q.q}</div>${q.options.map((opt, idx) => `<div class="option-item" id="opt-${i}-${idx}" onclick="selectOption(${i}, ${idx})">${opt}</div>`).join('')}`;
                wrapper.appendChild(div);
                const dot = document.createElement('div');
                dot.className = `nav-dot ${i===0?'current':''}`;
                dot.id = `dot-${i}`; dot.innerText = i+1; dot.onclick = () => jump(i);
                grid.appendChild(dot);
            });
        }

        window.selectOption = (qIdx, optIdx) => {
            answers[qIdx] = optIdx;
            document.querySelectorAll(`#q-cnt-${qIdx} .option-item`).forEach((el, idx) => el.classList.toggle('selected', idx === optIdx));
            document.getElementById(`dot-${qIdx}`).classList.add('answered');
            setTimeout(() => nav(1), 300);
        };

        window.jump = (n) => {
            if(n < 0 || n >= questions.length) return;
            document.querySelectorAll('#q-wrapper .screen').forEach(c => c.classList.remove('active-screen'));
            document.querySelectorAll('.nav-dot').forEach(d => d.classList.remove('current'));
            current = n;
            document.getElementById(`q-cnt-${current}`).classList.add('active-screen');
            document.getElementById(`dot-${current}`).classList.add('current');
            document.getElementById('finish-btn').style.display = (current === questions.length - 1) ? 'block' : 'none';
        };

        window.nav = (step) => jump(current + step);

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                if(timeLeft <= 0) finishQuiz(true);
                const m = Math.floor(timeLeft/60), s = timeLeft%60;
                document.getElementById('timer-box').innerText = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${m}:${s<10?'0':''}${s}`;
            }, 1000);
        }

        window.finishQuiz = async (auto = false) => {
            if(!auto && !confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§ØªØŸ")) return;
            clearInterval(timer);
            let score = 0;
            questions.forEach((q, i) => { if(answers[i] === q.correct) score++; });
            
            switchScreen('results-screen');
            document.getElementById('final-score').innerText = `${score}/60`;
            document.getElementById('timer-box').style.display = 'none';
            generateReview();
            localStorage.setItem(lockKey, "submitted");

            try {
                if (!user) await initAuth();
                const resCol = collection(db, "artifacts", appId, "public", "data", "results");
                await addDoc(resCol, {
                    name: document.getElementById('u-name').value,
                    phone: document.getElementById('u-phone').value,
                    address: document.getElementById('u-address').value,
                    birthdate: document.getElementById('u-birthdate').value,
                    score: score,
                    uid: user?.uid || "anon",
                    timestamp: serverTimestamp()
                });
            } catch (e) { console.error("Save Error", e); }
        };

        function generateReview() {
            const list = document.getElementById('review-list');
            list.innerHTML = questions.map((q, i) => `
                <div class="review-card ${answers[i] === q.correct ? 'correct-card' : 'wrong-card'}">
                    <b>${i+1}. ${q.q}</b><br>
                    <span>Ø¥Ø¬Ø§Ø¨ØªÙƒ: ${answers[i] !== null ? q.options[answers[i]] : 'Ù„Ù… ØªØ¬Ø¨'}</span><br>
                    ${answers[i] !== q.correct ? `<span style="color:green">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${q.options[q.correct]}</span><br>` : ''}
                    <small style="color:darkorange">Ø§Ù„Ù…Ø±Ø¬Ø¹: 1 ÙƒÙˆ ${q.ref}</small>
                </div>
            `).join('');
        }

        window.toggleReview = () => {
            const r = document.getElementById('review-list');
            r.style.display = r.style.display === 'none' ? 'block' : 'none';
        };

        window.showAdmin = async () => {
            const pass = prompt("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©:");
            if(pass === "24724") {
                switchScreen('admin-screen');
                const content = document.getElementById('admin-content');
                content.innerHTML = `<div style="padding:20px;text-align:center">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬...</div>`;
                
                try {
                    const col = collection(db, "artifacts", appId, "public", "data", "results");
                    const snap = await getDocs(col);
                    let res = [];
                    snap.forEach(d => res.push(d.data()));
                    res.sort((a,b) => (b.score || 0) - (a.score || 0));
                    
                    content.innerHTML = `<table>
                        <tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø¯Ø±Ø¬Ø©</th><th>Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th></tr>
                        ${res.map(r => `<tr>
                            <td>${r.name}</td>
                            <td>${r.score}</td>
                            <td>${r.phone}</td>
                            <td>${r.timestamp ? new Date(r.timestamp.seconds*1000).toLocaleDateString('ar-EG') : '-'}</td>
                        </tr>`).join('')}
                    </table>`;
                } catch(e) { 
                    content.innerHTML = `<div style="color:red;padding:20px;">Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.</div>`;
                }
            } else if(pass !== null) {
                alert("Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.");
            }
        };

        function switchScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active-screen'));
            document.getElementById(id).classList.add('active-screen');
        }
    </script>

    <style>
        :root { --p: #2c3e50; --s: #3498db; --win: #27ae60; --err: #e74c3c; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: #f0f2f5; margin: 0; padding: 15px; font-family: 'Segoe UI', Arial, sans-serif; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 550px; background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        header { background: var(--p); color: white; padding: 25px 20px; text-align: center; position: relative; }
        #timer-box { position: absolute; top: 10px; left: 10px; font-size: 0.8rem; background: rgba(0,0,0,0.3); padding: 5px 10px; border-radius: 15px; display: none; }
        .screen { display: none; padding: 20px; flex-direction: column; gap: 15px; }
        .active-screen { display: flex; }
        input { padding: 14px; border: 2px solid #eee; border-radius: 10px; font-size: 1rem; width: 100%; transition: 0.3s; }
        input:focus { border-color: var(--s); outline: none; }
        .btn-main { background: var(--s); color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1rem; }
        .btn-main:hover { opacity: 0.9; }
        .q-text { font-size: 1.2rem; font-weight: bold; color: var(--p); line-height: 1.5; margin-bottom: 10px; }
        .option-item { background: #f8f9fa; padding: 15px; border: 2px solid #eee; border-radius: 12px; cursor: pointer; transition: 0.2s; }
        .option-item.selected { background: #e3f2fd; border-color: var(--s); color: var(--p); font-weight: bold; }
        .nav-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 6px; margin-top: 20px; }
        .nav-dot { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; background: #eee; border-radius: 6px; font-size: 0.75rem; cursor: pointer; }
        .nav-dot.current { background: var(--p); color: white; border: 2px solid var(--s); }
        .nav-dot.answered { background: var(--win); color: white; }
        .review-card { padding: 15px; border-radius: 12px; margin-bottom: 15px; border-right: 6px solid #ccc; background: #fdfdfd; }
        .correct-card { border-color: var(--win); }
        .wrong-card { border-color: var(--err); }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #eee; padding: 12px; text-align: center; font-size: 0.9rem; }
        th { background: #f8f9fa; color: var(--p); }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div id="timer-box">20:00</div>
        <h2 id="app-title" onclick="showAdmin()" style="margin:0; cursor:pointer;">Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ø³Ø§Ù„Ø© ÙƒÙˆØ±Ù†Ø«ÙˆØ³ Ø§Ù„Ø£ÙˆÙ„Ù‰</h2>
        <div style="font-size: 0.9rem; margin-top: 8px; opacity: 0.9;">Ø§Ù„Ø£ØµØ­Ø§Ø­ Ø§Ù„Ø£ÙˆÙ„ (60 Ø³Ø¤Ø§Ù„)</div>
    </header>

    <!-- Reg -->
    <div id="reg-screen" class="screen active-screen">
        <div style="text-align:center; margin-bottom: 10px;">
            <div style="width: 80px; height: 80px; background: #f0f0f0; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 2rem;">ğŸ“œ</div>
        </div>
        <input type="text" id="u-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©">
        <input type="tel" id="u-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">
        <input type="text" id="u-address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† / Ø§Ù„Ù…Ù†Ø·Ù‚Ø©">
        <label style="font-size: 0.8rem; color: #666; margin-bottom: -10px;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:</label>
        <input type="date" id="u-birthdate">
        <button class="btn-main" onclick="startQuiz()">Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
    </div>

    <!-- Quiz -->
    <div id="quiz-screen" class="screen">
        <div id="q-wrapper"></div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <button class="btn-main" style="background:#bdc3c7" onclick="nav(-1)">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
            <button class="btn-main" onclick="nav(1)">Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>
        <button id="finish-btn" class="btn-main" style="background:var(--win); display:none;" onclick="finishQuiz()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</button>
        <div class="nav-grid" id="nav-grid"></div>
    </div>

    <!-- Results -->
    <div id="results-screen" class="screen" style="text-align: center;">
        <h2 style="color:var(--p)">Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</h2>
        <div style="font-size: 1.2rem;">Ø¯Ø±Ø¬ØªÙƒ Ù‡ÙŠ:</div>
        <div id="final-score" style="font-size: 4rem; font-weight: bold; color: var(--win); margin: 20px 0;">0/60</div>
        <p style="color:#7f8c8d;">ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©.</p>
        <button class="btn-main" onclick="toggleReview()" style="width:100%">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ø­Ù„ÙˆÙ„</button>
        <div id="review-list" style="display:none; text-align: right; margin-top: 20px; max-height: 400px; overflow-y: auto;"></div>
    </div>

    <!-- Admin -->
    <div id="admin-screen" class="screen">
        <h3 style="text-align: center; margin: 0;">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</h3>
        <div id="admin-content" style="overflow-x: auto;"></div>
        <button class="btn-main" onclick="location.reload()" style="background:var(--err)">Ø®Ø±ÙˆØ¬</button>
    </div>
</div>

</body>
</html>
